---
layout: lecture
title: "代码之外"
description: >
  学习关键软技能，包括文档写作、开源社区规范与 AI 协作礼仪。
thumbnail: /static/assets/thumbnails/2026/lec8.png
date: 2026-01-22
ready: true
video:
  aspect: 56.25
  id: 2DOEATfXT8k
---

成为一名优秀的软件工程师，不只是“把代码写到能跑”。  
你还需要写出别人（包括未来的自己）看得懂、能维护、可持续演进的代码。  
你还需要清晰沟通、有效协作，并在你参与的技术生态中成为负责任的成员，无论这个生态是开源还是商业闭源。

# 单向通信

软件工程里有大量“写给不在当前上下文里的人看”的内容：  
后来加入的队友、接手你代码的维护者，以及几个月后已经忘记背景的你自己。  
这类写作最关键的一点是传达“为什么（why）”，而不仅仅是“做了什么（what）”。  
“做了什么”通常能从代码本身看出来，而“为什么这么做”才是最容易随时间丢失的信息。

也许是工程师之间最常见的沟通形式
（除了代码本身）是代码注释。我个人发现
大量的代码注释是没有用的。但他们不必如此！好
注释解释了代码本身无法解释的事情：*为什么*某事是
以特定方式完成，而不是*如何*它工作（这就是代码
显示）。它们可以避免数小时的混乱，而不好的评论会增加噪音
或者，更糟糕的是，误导。

几乎总是有价值的评论类型：

- **TODOs**：标记不完整或未修饰的代码，但保留足够的代码
  让其他人了解什么是突出的以及为什么突出的背景
  被推迟了。 “TODO：优化”没有用； “TODO：这个 O(n²) 循环是
  对于 `n<100` 来说很好，但如果我们扩展”是可行的，则需要索引。
- **参考**：当代码实现时链接到外部源
  来自论文的算法，改编来自其他地方的代码，或者编码
  文档中指定的行为。使用永久链接。注意任何
  与参考的偏差。
- **正确性论证**：解释*为什么*产生不平凡的代码
  正确的结果。代码显示了步骤；评论解释了原因
  这些步骤有效。
- **惨痛教训**：如果您花了 30 多分钟调试某些东西
  修复方法是一个不明显的咒语，记录下来。过去的你
  没有意识到这是必要的；未来的读者也不会。
- **常量的基本原理**：幻数值得解释。为什么
  第1492章为什么是 16 位？它是随机选择的、来自测试的还是
  需要正确性吗？即使“任意选择”也是有用的
  信息。
- **承载选择**：如果正确性取决于
看似无辜的实现细节（例如，“必须是 BTreeSet
  因为下面的迭代顺序很重要”），所以明确地指出它。
- **“为什么不”**：当你故意避免明显的方法时，
  解释为什么。否则稍后会有人“修复”它并破坏东西。

自述文件（你有一个，对吧？）也是常见的第一个接触点
其他开发商。一个好的人会立即回答四个问题：什么？
这是吗？我为什么要关心？我该如何使用它？我该如何安装它？
按照这个顺序。其结构就像一个漏斗：一条单行线，也许还有一条
顶部的视觉演示，以便有人可以在几秒钟内决定这是否解决
他们的问题，然后逐渐增加深度。显示之前的使用情况
安装——人们希望在提交之前看看他们会得到什么
设置步骤。

提交消息是另一种“为他人写作”，通常是
被忽视了。它们通常被写为“fixed blah”或“added foo”，并且
虽然在某些情况下这可能就足够了，但很容易忘记这一点
它们形成了代码库“为何”如此演变的历史记录
做到了。当有人（包括你！）运行 `git blame` 试图理解时
一个令人困惑的变化，好的提交消息应该给他们答案。

一般来说，身体应该回答：
- 是什么问题迫使这个改变？
- 您考虑过哪些替代方案？
- 有哪些权衡或影响？
- 这种方法有什么令人惊讶的地方？

> 显然，您应该根据复杂性来衡量细节。一行错别字修复
> 只需要一个主题。花了几个小时才完成的微妙的竞争条件修复
> 调试值得解释问题和解决方案的段落。

对于复杂的更改，遵循问题 → 解决方案 → 可能会很有用
蕴含结构：从强制函数或限制开始，
然后解释发生了什么变化以及关键的设计决策，然后列出
值得注意的后果（积极和消极）。最后一部分是
特别重要；真正的工程涉及平衡问题，
并记录有意进行的权衡以防止未来
开发人员不会认为您错过了这个问题。

LLM_可以_有助于编写提交消息。然而，如果你简单地
将其指向您的更改并要求其写入提交消息
改变后，LLM将只能了解“是什么”，而不能了解“为什么”。并且
因此，生成的提交消息将主要是描述性的（
与我们想要的相反！）。如果您使用LLM来帮助您取得
首先进行更改，要求LLM在其中写入提交
同一会话可能是一个更好的选择，因为您与
LLM本质上是有关变革的丰富背景资源！
否则，或者此外，一个有用的技巧是专门告诉
LLM，您想要一条专注于“原因”（以及其他细微差别）的提交消息
来自上面的注释），然后_告诉它查询您是否丢失
上下文_。本质上，您就像一个用于编码的 MCP“工具”
它可以用来“读取”上下文的代理。

随着您的更改变得更加复杂，请确保同时分解提交
从逻辑上讲（`git add -p` 是你的朋友）。每个提交应该代表
一项可以独立理解和审查的连贯变化。
不要将重构与新功能混合或结合不相关的错误修复，
因为这使故事变得混乱，哪些变化解决了哪些问题，并且将
几乎肯定会减慢对更改的最终审查。它还
通过 `git bisect` 给你超能力，但这是一个故事
另一次。

> 当您开始更加勤奋地进行技术写作时，请注意一点，以及
> 更广泛地使用它，确保尊重读者。这很容易
> 一旦开始就会过度解释，但你必须抵制这种情况
> 强烈要求读者不要阅读您所写的任何内容。解释一下
> “为什么”并相信他们能够根据自己的情况找出“如何”。

# 合作

作为工程师，我们的大部分工作时间可能都花在自己编码上
键盘，但我们的很大一部分时间也被占用了
与他人沟通。这段时间通常被分成协作
和教育，投资于在这两方面取得更好的成绩的回报是
意义重大。

## 贡献

无论您是提交错误报告、贡献简单的错误修复，
或者实现一个巨大的功能，值得记住的是
用户通常比贡献者多几个数量级，
并且贡献者比维护者多一个数量级。
因此，维护者的时间被严重超额认购。如果你想
增加你的贡献到达某个地方的可能性
富有成效，你必须确保你的贡献具有很高的影响力
信噪比，值得维护人员花时间。

例如，一份好的错误报告会尊重维护者的时间
提供理解和重现问题所需的一切：

- **环境**：操作系统、版本号、相关配置
- **你所期望的** vs **实际发生的事情**
- **重现步骤**：具体。 “点击按钮”不太有用
  比“登录时单击 /settings 页面上的提交按钮
管理员。”
- **您已经尝试过的**：这可以防止重复的建议和
  表明您已经做了一些调查

> 如果您发现安全漏洞，请勿公开发布。联系方式
> 维护者首先私下并给他们合理的时间来修复
> 在披露之前。许多项目都有 SECURITY.md 文件或
> 类似的目的。

**确保搜索现有问题。** 您的错误或功能
请求可能已被报告，最好添加信息
现有的讨论而不是创建重复的内容。更不用说，
它减少了维护人员的噪音。

如果你能想出一个，那么最小的可重复的例子就是黄金。
它们为维护人员节省了大量的时间和精力，并且
可靠地重现错误通常是修复错误中最困难的部分。不
值得一提的是，您为隔离问题而付出的努力通常会有所帮助
你也能更好地理解它，有时会引导你找到解决办法
你自己。

如果您没有立即收到回复，请记住维护人员正在
经常在有限的时间内做志愿者。如果您正在等待回复
对他们来说，几周后礼貌地跟进就可以了；每日 ping 值是
不是。同样，“我也是”评论或错误报告只是一个
某些终端输出的复制粘贴往往会带来净负面影响
为您的问题获得关注。

如果您想贡献代码，您还需要
熟悉贡献指南。许多项目
有一个 `CONTRIBUTING.md` — 遵循它。您通常还想开始
小；拼写错误修复或文档改进是一个很好的第一步
贡献，因为它可以帮助您了解项目的流程，而无需
必须对内容进行大量的来回检查。

> 检查项目使用的许可证，因为您贡献的任何代码都会
> 属于同一许可证。特别要注意 Copyleft
> 许可证（如 GPL），要求衍生品也必须开源
> 如果您触摸它，可能会对您的雇主产生影响！
> [choosealicense.com](https://choosealicense.com/) 有更多有用的
> 信息。

当您决定打开拉取请求（“PR”）时，首先确保您
隔离您真正想要接受的更改。如果你的 PR 发生变化
同时发生许多其他不相关的事情，很可能
审阅者会将其发回给您，要求您将其清理。这是
类似于如何将 git 提交按语义分解为
相关的块。

在某些情况下，如果您有许多看似不同的更改，但
它们都需要启用一项功能，打开一个可能就可以了
捕捉所有变化的更大的 PR。但是，在这种情况下，请提交
卫生尤为重要，以便维护人员可以选择
查看更改“逐次提交”。

接下来，请确保解释清楚变革背后的“原因”。不要只是
描述_什么_改变了——解释_为什么_需要改变以及_为什么_
这是解决问题的好方法。你也应该主动
指出变更中需要特别注意的部分
审查，如果有的话。取决于 `CONTRIBUTING.md` 和您的性质
更改，审阅者可能还希望看到其他信息，例如
您所做的权衡或如何测试更改。

> 我们建议回馈上游项目而不是
> “分叉”项目，至少作为第一种方法。分叉（许可证
> 允许）应该保留给你想要的贡献
> make 超出了原始项目的范围。如果你做 fork，请制作
> 确保您认可原始项目！

人工智能让生成看似合理的代码和 PR 变得异常容易
很快，但这并不能成为你不了解自己的借口
贡献。提交人工智能生成的代码你无法解释负担
维护人员审查并可能维护代码，甚至
它的作者不明白。用AI来帮助你就好了
识别问题并提供修复/功能，**只要您仍然这样做
尽职调查**将其打磨成有价值的贡献，而不是
而不是将这项工作交给（已经超负荷的）维护人员。

请记住，对于维护者来说，接受 PR 意味着接受长期
责任。他们将在很久之后维护此代码
贡献者已经继续前进，因此可能会拒绝以下更改
出发点是好的，但不符合项目的方向，增加了复杂性
他们不想维护，或者需求根本不够
有据可查。 _你_作为贡献者来证明这一点
为什么接受贡献值得承担维护负担。

> 当收到 PR 反馈时，请记住您的代码不是您本人！
> 审阅者试图让代码变得更好，而不是批评你
> 个人而言。如果您不同意，请提出澄清问题 - 您可能会学到
> 某事，或者也许他们会的。

## 审核

您可能认为代码审查是高级开发人员所做的事情，但是
您可能会被要求比您预期更早地审查代码，并且
你的观点很有价值。新鲜的眼睛捕捉经历过的事物
开发人员忽视了，以及不太熟悉的人提出的问题
代码通常会揭示应该记录或简化的假设。

复习也是最快的学习方法之一。你会看到别人是如何
处理问题、学习模式和习语并培养直觉
是什么使代码可读。除了个人成长之外，评论还能发现错误
在投入生产之前，在整个团队中传播知识，并且
通过协作提高代码质量。他们不仅仅是
官僚开销。

良好的代码审查是一项需要随着时间的推移磨练的技能，但也有
一些可以让他们变得更好更快的技巧：

- **审查代码，而不是人**：
  “这个函数令人困惑”与“你写了令人困惑的代码”。
- **更喜欢可操作的评论**：
  “你能用配置数据类替换这些全局变量吗”更容易
  评论地址而不是“不要在此处使用全局变量”
- **提出问题而不是提出要求**：
  “如果 X 在这里为空会发生什么？”比邀请讨论更好
  “处理无效的情况。”
- **解释“为什么”**：
“考虑在这里使用常量”不如“考虑使用常量”有用
  此处为常量，因此我们可以根据情况轻松调整超时
  环境。”
- **区分阻塞问题和建议**：
  明确什么是必须改变的，什么是偏好问题。
- **承认什么是好的**：
  指出聪明的解决方案或干净的实施是令人鼓舞的
  并帮助作者知道要继续做什么。
- **知道何时停止**：
  贡献者只有这么多的时间和耐心，而且并不总是如此
  最好花时间处理所有的尼特。专注于大事，并且
  事后考虑自己清理虱子。

> 人工智能工具可以发现某些问题，但不能替代
> 人工审核。他们错过了背景，不了解产品
> 要求，并且可以自信地提出错误的建议。他们值得
> 作为第一步使用，但不能替代有思想的人类
> 审查。

# 教育

作为工程师，我们的很多非编码时间都花在询问或
回答问题，可能是两者的混合；合作期间，
与同伴对话或尝试学习时。提出好问题
是一种技能，可以让你更好地向任何人学习，而不仅仅是向别人学习
完美的解释者。朱莉娅·埃文斯 (Julia Evans) 有一些关于“[如何
提出好问题](https://jvns.ca/blog/good-questions/)”和“[如何
获得有用的答案
问题](https://jvns.ca/blog/2021/10/21/how-to-get-useful-answers-to-your-questions/)"
值得一读。

一些特别有价值的建议是：

- **首先陈述你的理解**：说出你认为你知道的内容并
  问“是吗？”这有助于回答者识别您的实际情况
  知识差距。
- **问是/否问题**：“X 是真的吗？”防止切线
  解释并且通常会提示有用的阐述。
- **具体**：“SQL 连接如何工作？”太模糊了。 “向左吗
  JOIN 包含右表没有匹配项的行？”是有责任的。
- **不懂就承认**：不熟悉的地方打断询问
  条款。这反映了信心，而不是弱点。同样，如果他们问
  对于你不知道答案的问题，最好说
  “我不知道”，可能会接着说“但我认为……”甚至
  “但我能找出来”。
- **不要接受不完整的答案**：不断询问后续问题，直到您
  其实明白。
- **先做一些研究**：基本调查可以帮助您提出更多问题
  有针对性的问题（虽然同事之间的随意问题是
  很好）。

请记住：精心设计的问题有益于整个社区。他们
其他人也需要理解的表面隐藏假设。

> 请注意，此建议同样适用于与
> LLM！

#人工智能礼仪

随着LLM和人工智能在软件工程中的使用越来越多，
周围的社会和专业规范仍在不断变化。我们已经
涵盖了[代理编码]中的许多战术考虑因素
讲座](/2026/agentic-coding/)，但也有“较软”的部分
它们的用途值得讨论。

第一个是，当人工智能为你做出有意义的贡献时
工作，**披露它**。这与羞耻无关，而是与诚实有关，
设定适当的期望，并确保最终的工作得到
适当的审查级别。还值得透露的是
你使用人工智能的_部分_——“这个”之间有一个有意义的区别
整个事情都是vibecoded”和“我编写了这个备份工具并使用了LLM
设计 Web 前端的样式”。例如，我们使用 LLM 来帮助编写
其中一些讲义，包括校对、头脑风暴和
生成代码片段和练习的初稿。

您还需要遵循您所在团队和项目的规范
在这里做出贡献。一些团队对于使用有更严格的政策
人工智能比其他人工智能更重要（例如，出于合规性或数据驻留原因），以及
你不想意外地与此发生冲突。对你的事持开放态度
使用有助于防止潜在的代价高昂的错误。

> 如果您的目标是将学习作为您正在从事的工作的一部分，请坚持下去
> 请注意，如果您有人工智能，可以为您完成全部或大部分工作
> 弄巧成拙；你可能会学到更多关于提示的知识（也许
> 查看 AI 输出）而不是任务本身。尤其是当你
> 学习，重点可能是旅程，而不是目的地，所以使用
> 人工智能“快速找到解决方案”是一个反目标。

访谈和其他评估中出现了相关的担忧
情况。这些通常旨在专门评估_您的_
技能和能力，而不是LLM的技能和能力。现在有更多公司允许您
在面试中使用LLM和其他人工智能辅助工具，只要你
让他们在访谈中观察这些互动（即，他们
也在评估您使用这些工具的技能！），但是那些
仍属于少数。如果你不确定AI是否能提供帮助
是否在特定任务的范围内，请询问！

> 不言而喻，如果评估情况明确
> 要求不需要外部工具，不需要LLM等，你不应该使用它们。
> 尝试谨慎行事而不被抓住**会**回来
> 咬你。

# 练习

1. 浏览知名项目的源代码（例如
   [Redis](https://github.com/redis/redis) 或
   [卷曲](https://github.com/curl/curl))。查找一些示例
   讲座中提到的评论类型：一个有用的 TODO，参考
   外部文档，解释避免的“为什么不”评论
   方法，或者是一个来之不易的教训。如果那样的话会失去什么
   评论不存在吗？

1. 选择一个您感兴趣的开源项目并查看其
   最近的提交历史记录 (`git log`)。找到一个好的提交
   解释“为什么”进行更改的消息，并且消息较弱
   仅描述“更改内容”的消息。弱者请看
   diff (`git show <hash>`) 并尝试编写更好的提交消息
遵循问题 → 解决方案 → 影响结构。注意如何
   需要做很多工作来重新组合必要的上下文
   事实！

1. 比较三个 1000+ star 的 GitHub 项目的 README。是
   它们都同样有用吗？寻找最常遇到的事情
   对您来说是噪音，也是您将来自己编写的自述文件的教训。

1. 在您使用的项目上找到一个未解决的问题（选中“好第一个问题”
   或“需要帮助”标签（如果有的话）。评估问题
   讲座的标准：它看起来是否重视
   维护者的时间并包含调试所需的所有信息
   或者您是否期望维护者可能需要进行多次
   与提交者进行一轮轮的提问以找到根本问题？

1. 想一想您在使用的软件中遇到的错误（或者在
   问题跟踪器）。练习创建一个最小的可重现示例：
   删除与错误无关的所有内容，直到获得
   仍能说明问题的最小情况。写下你什么
   已删除以及原因。

1. 在您熟悉的项目中找到合并的拉取请求
   实质性审查意见（不仅仅是“LGTM”）。通读
   审查。所有的评论都同样有效吗？如果你是公关
作者，你会如何看待获得所有这些的体验
   评论？

1. 去 Stack Overflow 找一个你了解的技术的问题
   有一个高票数的答案。然后找到一个已关闭的或
   严重被否决。将它们与讲座中的建议进行比较；
   是否可以预测哪个问题会得到更好的答案？
